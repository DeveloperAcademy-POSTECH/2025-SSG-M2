>[!question]
>GQ1. 메모리 구조는 어떻게 되어 있을까?
>GQ2. 메모리 구조를 알면 어떤 부분이 좋나요?

## Description

- 컴퓨터 기본 동작 원리
  1. 실제로 우리(개발자)의 코드는 평소에 하드에 저장되어 있다가 프로그램을 실행하는 순간 메모리(RAM)에
     복사되어 올라간다.
  2. CPU는 한번에 한가지 일처리만 할 수 있다
     (물론 CPU내에는 여러개의 코어와 쓰레드가 있기 떄문에 한꺼번에 여러일을 동시에 처리 하게
     만들 수 있지만, 기본적인 동작은 한번에 한가지 일처리이다.)
  3. 우리의 코드는 한줄씩 컴퓨터가 해석할 수  있는 (한번에 CPU가 처리할 수 있는) 형태의 기계어로 바뀌어서
     메모리에 올라간다
  4. CPU는 메모리에 있는 코드를 한줄씩 차례대로 실행한다.
  5. 메모리에는 실제 모든 공간에 주소가 붙어 있어 CPU에서 접근이 가능하다.

- 데이터의 종류에 따라 최대의 속도와 최적의 조건으로 사용하기 위한 효율적 메모리의 구조 (설계)
- 코드-데이터-힙스-스택 메모리 영역은 메모리 내에서 원래부터 하드웨어적으로 나누어져 있는 공간이 아니라, 프로그램이 실행되면서 적절히 OS가 나누어서 관리하고 실행하는 개념이다.


![[스크린샷 2025-05-30 오전 2.18.52.png]]

위 그림과 같이, 프로그램이 실행되기 위해서는 운영체제(OS)가 프로그램의 정보를 메모리에 로드 해야 한다.

프로그램의 실행은 두가지 중요한 의미를 가진다.
- 파일 시스템에 존재하던 실행파일이 메모리에 ==적재==된다는 의미
- 프로그램이 ==CPU를 할당받고 명령을 수행==하고 있는 상태

파일 시스템에 있는 실행 파일이 메모리에 적재될 때, ==실행파일 전체가 메모리에 올라가지 않는다.== 
일부분만 메모리에 올라가고 나머지는 디스크의 특정영역인 ==스왑 영역==에 존재한다.




* Free Store
-> 보통 Heap(힙) 과 거의 같은 의미롤 쓰이지만, 문맥에 따라 가르게 사용됨

1) Heap : 운영체제가 전체적으로 관리하는 메모리영역
2) Free Store : 언어 런타임 (C++, Swift)이 Heap 위에서 관리하는 동적 메모리

==But 실무에서는 거의 Heap = Free Stroe라고 생각 하면 됨...==
그러니 그냥 넘어 가자 




- 스와핑(Swapping)
-> 프로세스가 실행되려면 프로그램 코드를 메인 메모리에 적재해 두어야 한다. 그런데.. 만약 프로그램 용량이 메인 메모리보다 크면 어떻게 될까? 이때 스와핑 기법을 쓴다.

-> 메모리의 관리를 위해 사용하는 기법

표준 Swapping 방식으로는 Round Robin과 같은 스케줄링의 다중 프로그래밍 환경에서 CPU 할당 시간이
끝난 프로세스의 메모리를 보조 기억장치로 내보내고 다른 프로세스의 메모리를 불러 들일 수 있다.
이 과정을 Swap(스왑 시킨다)이라 한다.

- Swap In : 보조기억장치 -> 주기억장치(RAM)로 불러오는 과정
- Swap Out: 주기억장치 -> 보조기억장치로 내보내는 과정
- Swap에는 큰 디스크 전송기간이 필요하기 때문에 현재에는 메모리 공간이 부족할 때 Swapping이 시작
- 하나의 사용자 프로그램이 완료될 때까지 교체 과정 여러 번 수행 가능
- 현재는 '페이징 기법'으로 발전 했음


이 처럼 실행중인 프로그램을 프로세스라고 하는데, 프로세스는 메모리와 CPU의 자원을 할당받는다.

여기서

할당받은 프로세스의 메모리 주소 공간은 코드(code), 데이터(data),힙(heap),스택(stack) 영역으로 구분된다.
이러한 주소 공간을 가상 메모리라고 부른다.

![[스크린샷 2025-05-30 오전 2.33.50.png|500]]

1) 코드영역 (=Text)
   
- 코드영역은 실행할 프로그램의 코드가 CPU에서 수행할 수 있는 기계어로 변환되어 저장되는 영역이다.
- 컴파일(compile) 타임에 결정된다
- 중간에 코드를 변경할 수 없게 Read-Only인 영역이다
- 텍스트 영역이라고 부르기도 한다
- 프로그램이 시작하고 종료될 때 까지 메모리에 계속 남는다.

-> 이렇게 말하면 ..걍 무슨 교과서임 조금 더 드릴링 해서 정리 해보자

- 프로그램을 컴파일 하면, Swift (고급언어)가 기계어로 번역됨
- 번역된 실행 가능한 명령어(기계어)가 저장되는 영역이 '코드영역'임
- 읽기 전용 (Read-Only)이기 때문에, 실행중에 명령어 자체를 수정할 수 없다.
- 컴파일 타임에 결정되며, 프로그램 실행 내내 항상 메모리에 상자

여기서 좀더 드릴링

*읽기 전용*
-> 보안상의 이유로 쓰기 금지됨 (ex) 바이러가 코드 자체를 바꾸는 것을 막음


``` swift

struct Dog {
    var name: String

    func bark() {
        print("\(name) says woof!")
    }
}

1) bark() 함수 코드 -> 코드영역
-> 실제 print 명령어 등의 기계어로 변환 되어 저장

2) name 값 -> 스텍 or 힙
-> 구조체 이므로, 인스턴가 저장된 곳에 따라 다름
(로컬 : 스텍, 동적 : 힙)


```

로컬 과 동적의 차이는 (스택, 힙) 차이를 설명하면서 이야기 할 예정


## 주요 기능
+ 실제 활용을 작성

## 코드 예시
+ 실제 코드 예시를 작성

## Keywords
+ 파생된 키워드들을 작성

## References
- 참고한 레퍼런스를 작성 (예 : Apple의 공식 문서)