>[!question]
>GQ1. 델리게이트가 무엇인가?
>GQ2. 언제사용하는가 ?

스위프트(또는 iOS 개발)에서 **델리게이트(Delegate)** 패턴은 **객체 간의 커뮤니케이션을 처리하는 대표적인 디자인 패턴**입니다. 주로 한 객체가 어떤 작업을 대신 처리해달라고 다른 객체에 “위임(delegate)“할 때 사용됩니다.

## **🔹 Delegate란?**

델리게이트는 **특정 역할을 다른 객체에 위임하는 프로그래밍 패턴**입니다.

### **✅ 언제 사용하나요?**

- 특정 이벤트나 동작이 발생했을 때, 이를 다른 객체에게 알려주고 처리를 맡기고 싶을 때
    
- 일반적으로 UIKit에서 많이 사용됨
    
    예) UITableView, UITextField, UICollectionView 등
    

---

## **🔹 구성 요소**

1. **Protocol (delegate 프로토콜 정의)**
2. **Delegate 프로퍼티 (약한 참조로 설정)**
3. **Delegate 메서드 호출**

---

## **🔹 예시: 커스텀 델리게이트 만들기**

**1. 프로토콜 정의**

```swift
protocol MyCustomDelegate: AnyObject {
		// AnyObject: 이 프로토콜은 클래스에서만 채택 가능
    func didTapButton()
}
```

**2. 델리게이트 프로퍼티 정의**

```swift
class MyView {

		// 'weak'을 사용해서 순환 참조를 방지 (메모리 누수 막기 위해)
    weak var delegate: MyCustomDelegate?  
    
    func buttonTapped() {
        delegate?.didTapButton()
    }
}
```

- weak
    
    > weak은 **객체를 메모리에 붙잡지 않도록 약하게 참조하는 방법 (약한 참조)** 델리게이트 같은 상황에서 **순환 참조를 방지**
    
    ```swift
    // 순환 참조 예시
    class A {
        var b: B?
    }
    
    class B {
        var a: A?
    }
    
    let a = A()
    let b = B()
    a.b = b
    b.a = a  // ❌ 서로를 강하게 참조함 → 메모리에서 안 사라짐
    ```
    
    - 둘 다 strong으로 서로를 참조하면,
    - 아무도 안 쓰더라도 메모리에서 **해제되지 않음** (→ 메모리 누수)
    
    ```swift
    // 해결법
    class B {
        weak var a: A?  // ✅ 약한 참조로 바꾸면 A가 사라질 수 있음
    }
    ```
    

**3. 델리게이트 채택 및 구현**

```swift
class ViewController: UIViewController, MyCustomDelegate {
    let myView = MyView()
    
    // override활용하여 viewDidLoad 함수 재정의
    override func viewDidLoad() {
		    // 부모 클래스인 UIViewController가 원래 하던 동작을 먼저 수행하게 함
        super.viewDidLoad()
		     
		    // myView의 delegate 프로퍼티에 self(나 자신)를 할당.
        // 즉, 앞으로 myView에서 발생하는 어떤 행동(예: 버튼이 눌림)을
        // ViewController 자신이 대신 처리하겠다는 뜻.
        // 이 때 self는 MyCustomDelegate 프로토콜을 따르기 때문에 가능함.   
        myView.delegate = self
    }

		// MyView → delegate?.didTapButton() → ViewController의 이 메서드가 실행됨.
    func didTapButton() {
        print("버튼이 눌렸습니다.")
    }
}
```